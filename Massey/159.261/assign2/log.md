---
title: Rythem game
description: 
categories: 
tags: 
weight: 2
author: Hamhuo ([@hamhuo](https://github.com/hamhuo-hub))
---
#### 5/8

写了定时器，输入BPM可以控制实体移动
需要完善逻辑，尽可能改成以节拍控制，根据不同节拍数控制实体动作

需求，攻击模式设计。继承enemie类重写移动策略

以节拍为单位，共两种策略-移动与攻击（初步设定攻击时静止）
移动目标是靠近玩家，攻击无目标，但是攻击频率固定。

问题：玩家在快速击键时会快速移动（floating）忽略节拍 -- 缺少移动计数，增加一个移动计数

目前的设计是以帧为单位更新的，所有输入在一帧内计算。为了保证绘图时按照帧为单位，游戏中按照节拍为单位，需要限制更新。
所有需要计算的变量在节拍开始时初始化完毕，无论该节拍内存在几帧，节拍时间固定。也就是说绘图只是两个节拍状态之间的过度，变量在节拍之间的修改会被忽略（冻结）